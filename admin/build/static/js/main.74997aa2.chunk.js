(this["webpackJsonpskeeballworldtour-admin"]=this["webpackJsonpskeeballworldtour-admin"]||[]).push([[0],{31:function(e,t,a){e.exports=a(61)},36:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(27),c=a.n(r),o=(a(36),a(2)),u=a(4),m=a(10),s=function(e){var t=e.text;return l.a.createElement(n.Fragment,null,l.a.createElement("h2",{className:"text-center"},t),l.a.createElement("hr",null))},i=function(){return l.a.createElement(n.Fragment,null,l.a.createElement(s,{text:"Welcome to Admin Central"}))},d=a(9),E=a.n(d),p=Object(n.createContext)([{},function(){}]),g=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),u=Object(o.a)(c,2),s=u[0],i=u[1],d=Object(n.useState)(null),g=Object(o.a)(d,2),b=g[0],h=g[1],f=Object(n.useContext)(p),v=Object(o.a)(f,2),x=v[0],S=v[1];return l.a.createElement("div",null,x?l.a.createElement(m.a,{to:{pathname:"/"}}):l.a.createElement(n.Fragment,null,l.a.createElement("h1",null,"Login"),l.a.createElement("form",{onSubmit:function(e){return e.preventDefault(),h(null),a.match(/^[a-zA-Z][a-zA-Z0-9-_]{3,10}[a-zA-Z0-9]$/)&&s.match(/^[a-zA-Z0-9-_]{6,12}$/)?E.a.post("/api/auth/login",{username:a,password:s}).then((function(e){200===e.status?S({id:e.data.user.id,username:e.data.user.username}):(S(null),h(e.data.message))})).catch((function(e){console.log(e),h("An error occurred trying to log in the user!")})):h("Username and Password must be in the proper format!"),!0}},l.a.createElement("label",null,"Username"),l.a.createElement("input",{type:"text",value:a,name:"username",onChange:function(e){return r(e.target.value)}}),l.a.createElement("label",null,"Password"),l.a.createElement("input",{type:"password",value:s,name:"password",onChange:function(e){return i(e.target.value)}}),l.a.createElement("button",null,"Submit")),b&&l.a.createElement("div",{className:"text-danger font-weight-bolder"},b)))},b=(a(59),a(60),a(30)),h=function(e){var t=e.user,a=e.component,n=Object(b.a)(e,["user","component"]);return l.a.createElement(m.b,Object.assign({},n,{render:function(e){return t?l.a.createElement(a,e):l.a.createElement(m.a,{to:{pathname:"/login"}})}}))},f=function(){return l.a.createElement("div",{className:"m-5 bigger"},l.a.createElement("p",{className:"text-danger"},l.a.createElement("b",null,"Error 404!")),l.a.createElement("p",null,"An error has occurred."),l.a.createElement("p",null,"The page you are looking for does not exist!"))},v=function(){var e=Object(n.useContext)(p),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),m=Object(o.a)(c,2),s=m[0],i=m[1];return l.a.createElement(n.Fragment,null,a?l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"mb-4"},"Logged in as: ",a.username),l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),E.a.get("/api/auth/logout").then((function(){r(null)})).catch((function(e){console.log(e),i("An error occurred trying to log out the user!")}))}},l.a.createElement("button",null,"Log Out")))):l.a.createElement(u.b,{to:"/login"},"Log In"),s&&l.a.createElement("div",{className:"text-danger font-weight-bolder"},s))},x=function(){return l.a.createElement("div",{className:"row border-bottom mb-4"},l.a.createElement("div",{className:"col-6"},"Skeeball World Tour Admin Area",l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(u.b,{to:"/"},"Admin Central")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"/unprotected"},"Unprotected Page")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"login"},"Login")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"blah"},"Bad Route")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"add-store"},"Add Store")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"edit-store"},"Edit Store"))))),l.a.createElement("div",{className:"col-6 text-right"},l.a.createElement(v,null)))},S=function(){return l.a.createElement("div",{className:"row border-top mt-4"},l.a.createElement("div",{className:"col-12 text-center p-3 small"},"\xa9 2010 Skeeball World Tour"))},j=function(){return l.a.createElement(s,{text:"Add a New Store"})},O=a(12),_=a(16),y=function(e){var t=e.selectedStore,a=e.handleChange,r=e.setSelectedStore;return l.a.createElement(n.Fragment,null,l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return r(null)}},"Cancel")),l.a.createElement("td",null,t.store_id),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"store_name",value:t.store_name,onChange:a})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"store_address",value:t.store_address,onChange:a})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"store_city",value:t.store_city,onChange:a})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"store_state",value:t.store_state,onChange:a})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"store_zip",value:t.store_zip,onChange:a})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"store_phone",value:t.store_phone,onChange:a})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"map_url",value:t.map_url,onChange:a})),l.a.createElement("td",null,l.a.createElement("select",null,l.a.createElement("option",{value:"1"},"Yes"),l.a.createElement("option",{value:"0"},"No"))))},N=function(e){var t=e.store,a=e.setSelectedStore;return l.a.createElement(n.Fragment,null,l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return a(t)}},"Select")),l.a.createElement("td",null,t.store_id),l.a.createElement("td",null,t.store_name),l.a.createElement("td",null,t.store_address),l.a.createElement("td",null,t.store_city),l.a.createElement("td",null,t.store_state),l.a.createElement("td",null,t.store_zip),l.a.createElement("td",null,t.store_phone),l.a.createElement("td",null,t.map_url),l.a.createElement("td",null,t.active))},w=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({errorMsg:void 0,isLoaded:!1}),u=Object(o.a)(c,2),m=u[0],i=u[1],d=Object(n.useState)(null),p=Object(o.a)(d,2),g=p[0],b=p[1];Object(n.useEffect)((function(){E.a.get("/api/admin/stores").then((function(e){r(e.data),i({errorMsg:void 0,isLoaded:!0})})).catch((function(e){console.log(e),r(null),i({errorMsg:"An error occurred fetching stores!",isLoaded:!0})}))}),[]);var h=function(e){var t=e.target,a=t.name,n=t.value;b((function(e){return Object(_.a)(Object(_.a)({},e),{},Object(O.a)({},a,n))}))};return l.a.createElement(n.Fragment,null,l.a.createElement(s,{text:"Edit / Delete a Store"}),m.isLoaded?a&&a.length>0?l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement("div",{className:"min-w-50 mx-auto"},l.a.createElement("div",{className:"mb-3 table-wrapper"},l.a.createElement("table",{className:"table table-bordered table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"bg-gray6"},l.a.createElement("th",null,"Action"),l.a.createElement("th",null,"Id"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Address"),l.a.createElement("th",null,"City"),l.a.createElement("th",null,"State"),l.a.createElement("th",null,"Zip"),l.a.createElement("th",null,"Phone"),l.a.createElement("th",null,"Map URL"),l.a.createElement("th",null,"Active"))),l.a.createElement("tbody",null,a.map((function(e){return l.a.createElement("tr",{key:e.store_id},g&&g.store_id===e.store_id?l.a.createElement(y,{selectedStore:g,handleChange:h,setSelectedStore:b}):l.a.createElement(N,{store:e,setSelectedStore:b}))}))))))):a?l.a.createElement("span",{className:"empty-result"},"There are no stores to display!"):l.a.createElement("span",{className:"empty-result"},m.errorMsg):l.a.createElement("div",{className:"text-center"},l.a.createElement("img",{src:"/images/loading.gif",alt:"Loading"})))};function C(){return l.a.createElement("h1",{className:"text-center"},"Unprotected Page")}var A=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){E.a.get("/api/auth/status").then((function(e){200===e.status?r(e.data.user):r(null)})).catch((function(e){return console.log(e)}))}),[]),l.a.createElement(u.a,null,l.a.createElement("div",{className:"container border bg-white"},l.a.createElement(p.Provider,{value:[a,r]},l.a.createElement(x,null),l.a.createElement(m.d,null,l.a.createElement(h,{exact:!0,path:"/",component:i,user:a}),l.a.createElement(h,{exact:!0,path:"/add-store",component:j,user:a}),l.a.createElement(h,{exact:!0,path:"/edit-store",component:w,user:a}),l.a.createElement(m.b,{exact:!0,path:"/login"},a?l.a.createElement(m.a,{to:"/"}):l.a.createElement(g,null)),l.a.createElement(m.b,{exact:!0,path:"/unprotected",component:C}),l.a.createElement(m.b,{component:f})),l.a.createElement(S,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.74997aa2.chunk.js.map